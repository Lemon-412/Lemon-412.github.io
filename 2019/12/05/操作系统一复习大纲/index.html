<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.5.0',
    exturl: false,
    sidebar: {"position":"left","display":"always","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="第一章 操作系统引论1.1 操作系统的目标和作用操作系统是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充。目标：方便性，有效性，可扩充性，开放性作用：用户和硬件间的接口，管理系统资源，抽象计算机资源">
<meta name="keywords" content="study note">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统一复习大纲">
<meta property="og:url" content="http:&#x2F;&#x2F;yoursite.com&#x2F;2019&#x2F;12&#x2F;05&#x2F;%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%80%E5%A4%8D%E4%B9%A0%E5%A4%A7%E7%BA%B2&#x2F;index.html">
<meta property="og:site_name" content="Lemon&#39;s blog">
<meta property="og:description" content="第一章 操作系统引论1.1 操作系统的目标和作用操作系统是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充。目标：方便性，有效性，可扩充性，开放性作用：用户和硬件间的接口，管理系统资源，抽象计算机资源">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-12-05T11:14:31.409Z">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/2019/12/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%80%E5%A4%8D%E4%B9%A0%E5%A4%A7%E7%BA%B2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>操作系统一复习大纲 | Lemon's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Lemon's blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>日志</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/lemon-412" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/12/05/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%80%E5%A4%8D%E4%B9%A0%E5%A4%A7%E7%BA%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/Lemon.jpg">
      <meta itemprop="name" content="Lemon Qin">
      <meta itemprop="description" content="愿我在未来的几年内，不要因为走得太远，忘记自己为什么出发">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Lemon's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          操作系统一复习大纲
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2019-12-05 12:16:09 / 修改时间：19:14:31" itemprop="dateCreated datePublished" datetime="2019-12-05T12:16:09+08:00">2019-12-05</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h3 id="第一章-操作系统引论"><a href="#第一章-操作系统引论" class="headerlink" title="第一章 操作系统引论"></a><center>第一章 操作系统引论</center></h3><h4 id="1-1-操作系统的目标和作用"><a href="#1-1-操作系统的目标和作用" class="headerlink" title="1.1 操作系统的目标和作用"></a>1.1 操作系统的目标和作用</h4><p>操作系统是配置在计算机<strong>硬件上的第一层软件，是对硬件系统的首次扩充</strong>。<br><strong>目标</strong>：方便性，有效性，可扩充性，开放性<br><strong>作用</strong>：用户和硬件间的接口，管理系统资源，抽象计算机资源</p>
<a id="more"></a>
<h4 id="1-2-操作系统的发展过程"><a href="#1-2-操作系统的发展过程" class="headerlink" title="1.2 操作系统的发展过程"></a>1.2 操作系统的发展过程</h4><p><strong>未配置操作系统的计算机系统</strong>：</p>
<ul>
<li>人工操作方式：用户独占全部资源</li>
<li>脱机IO方式： CPU空闲时间，提升IO效率</li>
</ul>
<p><strong>单道批处理系统</strong>：<br>内存中始终保持一道作业，IO请求时CPU空闲，小作业内存资源空闲</p>
<p><strong>多道批处理系统</strong>：<br>用户提交作业进入外存，作业调度若干作业进入内存，共享CPU和系统汇总的资源。多道程序交替运行。<br>优点：资源利用率高，吞吐量大<br>缺点：平均周转时间长，无交互能力<br>需要解决的问题：处理机争用，内存分配和保护，IO设备分配，文件组织管理，作业管理，用户与系统接口。</p>
<p><strong>分时系统</strong>：侧重用户终端互不干扰，人机交互<br>引入：人机交互（用户想要独占主机），共享主机。<br>关键问题：及时接收，及时处理（直接进入内存，RR）</p>
<p><strong>实时系统</strong>：侧重多路控制现场的设备、数据互不干扰，程序数据信息交互<br>能及时响应外部请求，在规定时间内完成对事件的处理，控制实时任务的协调执行。</p>
<p>比较：</p>
<ul>
<li>多路性：分时为多终端服务；实时周期性控制</li>
<li>独立性：多终端互不干扰；信息采集和对象控制互不干扰</li>
<li>及时性：用户可接受；要求更高</li>
<li>交互性：强；仅对信息查询系统中特定命令</li>
<li>可靠性：较强；非常强</li>
</ul>
<h4 id="1-3-操作系统的基本特征（四大特征）"><a href="#1-3-操作系统的基本特征（四大特征）" class="headerlink" title="1.3 操作系统的基本特征（四大特征）"></a>1.3 操作系统的基本特征（四大特征）</h4><ul>
<li>并发：多个事件在同一时间段发生。<br> 引入进程使得并发成为可能。微观上是交替执行。</li>
<li>共享：资源供多个并发执行的进程同时使用。<br> 分互斥资源共享和同时访问</li>
<li>虚拟：将一个物理实体变为若干逻辑对应物，提升利用率。<br> 分时分复用和空分复用</li>
<li>异步：进程的执行顺序和时间不确定。</li>
</ul>
<p>1.4 操作系统的主要功能（五大功能）</p>
<ul>
<li><strong><em>处理机管理功能</em></strong>：即对进程的管理<ul>
<li>进程控制：创建、撤销、状态迁移</li>
<li>进程同步：临界资源的互斥访问</li>
<li>进程通信：进程的合作</li>
<li>调度：作业调度和进程调度</li>
</ul>
</li>
<li><strong><em>存储器管理功能</em></strong>：内存分配（动态静态）、内存保护、地址映射、内存扩充</li>
<li><strong><em>设备管理功能</em></strong>：（管理IO设备）缓冲管理、设备分配、设备处理</li>
<li><strong><em>文件管理功能</em></strong>：文件存储空间管理、目录管理、文件读写管理保护</li>
<li><strong><em>操作系统与用户之间的接口</em></strong>：为方便用户使用<ul>
<li><strong>用户接口</strong>：方便用户直接或间接控制自己的作业<ul>
<li>联机用户接口（terminal）：由一组键盘操作命令及解释程序组成</li>
<li>脱机用户接口（.sh）：用作业控制语言写作业说明书</li>
<li>图形用户接口：图标等</li>
</ul>
</li>
<li><strong>程序接口</strong>：为用户程序访问系统资源设置，是用户程序取得系统服务的唯一途径</li>
</ul>
</li>
<li>新功能：系统安全、网络功能和服务、支持多媒体</li>
</ul>
<h4 id="1-5-操作系统的结构设计"><a href="#1-5-操作系统的结构设计" class="headerlink" title="1.5 操作系统的结构设计"></a>1.5 操作系统的结构设计</h4><p><strong>系统调用</strong>：把应用程序的请求传送至内核，调用相应的内核函数完成所需的处理，将处理返回给应用程序。<strong>系统调用是用户程序取得系统服务的唯一途径</strong>。<br><strong>作用</strong>：保证系统和资源的安全性；提供统一接口提升编程效率。<br>用户态 —&gt; 系统调用 —&gt; 内核态<br><strong>传参方式</strong>：指令自带参数；寄存器直接/间接传参；内存堆栈区传参</p>
<p><strong>内核</strong>：一组程序控制模块，作为可信软件提供支持进程并发执行的基本功能和操作，驻留内核空间，运行于和心态，具有访问硬件设备和内存的全部权限，可以执行特权指令。</p>
<p><strong>传统操作系统结构</strong>：无结构OS、模块化结构OS、分层式结构OS（自底向上设计）</p>
<p><strong>微内核OS结构</strong>（对应宏内核OS结构）：<br>将操作系统划分成两部分（微内核和多个服务器），将操作系统中尽可能多的成分和功能放到服务器中运行，而留下一个尽可能小的内核完成操作系统最核心的功能。</p>
<p>基本概念：</p>
<ul>
<li>足够小的内核：放入与硬件密切相关的部分、一些基本功能、与服务器的通信</li>
<li>基于客户/服务器模式：客户与服务器之间通过微内核实现信息交互</li>
<li>应用“机制与策略分离”原理：该做什么和怎么做分离</li>
<li>采用面向对象技术：抽象和封装</li>
</ul>
<p>基本功能：进程（线程）管理、低级存储器管理、中断和陷入处理</p>
<p>优点：</p>
<ul>
<li>提高系统可扩展性</li>
<li>提高系统可靠性</li>
<li>可移植性强</li>
<li>提供对分布式系统的支持（多个处理机通过通信线路互联而构成的松散耦合的系统）</li>
<li>融入面向对象技术</li>
</ul>
<p>缺点：频繁的上下文切换，运行效率较早期操作系统有所降低。</p>
<h3 id="第二章-进程的描述和控制"><a href="#第二章-进程的描述和控制" class="headerlink" title="第二章 进程的描述和控制"></a><center>第二章 进程的描述和控制</center></h3><h4 id="2-1-前趋图和程序执行"><a href="#2-1-前趋图和程序执行" class="headerlink" title="2.1 前趋图和程序执行"></a>2.1 前趋图和程序执行</h4><p>前趋图：描述进程执行的先后顺序，DAG</p>
<p>前趋图顺序执行的特征：</p>
<ul>
<li>顺序性：严格按照顺序执行</li>
<li>封闭性：程序运行时独占全部资源</li>
<li>可再现性：只要初始环境和条件相同，无论执行过程最终结果一定相同。</li>
</ul>
<p>前趋图并发执行的特征：</p>
<ul>
<li>间断性：程序之间相互制约</li>
<li>失去封闭性：资源共享</li>
<li>不可再现性：多次执行结果不同</li>
</ul>
<h4 id="2-2-进程的描述"><a href="#2-2-进程的描述" class="headerlink" title="2.2 进程的描述"></a>2.2 进程的描述</h4><p><strong>进程的定义</strong>：<br>进程是<strong>进程实体的运行过程</strong>，是系统进行<strong>资源分配和调度</strong>的一个<strong>独立单位</strong>。<br>进程的出现<strong>使程序并发执行成为可能</strong>。<br>系统使用<strong>进程控制块（PCB）</strong>描述进程的<strong>基本情况和活动过程</strong>，进而<strong>控制管理进程</strong>。<br><em>Main函数参数和系统调用的关系</em></p>
<p><strong>进程的特征</strong>：</p>
<ul>
<li>动态性：<strong>创建产生，调度执行，撤销消亡</strong>（程序是静态的）</li>
<li>并发性：多个进程在同一个时间段中并发执行（程序无PCB不能并发）</li>
<li>独立性：进程实体有独立资源能独立运行（程序无PCB不能独立运行）</li>
<li>异步性：进程按各自的不可预知的速度推进</li>
</ul>
<p>进程和程序的区别：</p>
<ul>
<li>进程是动态的，程序是静态的</li>
<li>进程是暂时的，程序时永恒的</li>
<li><strong>进程包含程序、数据和PCB</strong></li>
<li>进程可以包含多个程序，同一程序可以对应多个进程</li>
</ul>
<p><strong>进程的状态和转化</strong>：<br>引入挂起操作的作用：</p>
<ul>
<li>终端用户的需要：检查、修正错误</li>
<li>父进程的请求：考察和协调子进程</li>
<li>负荷调节的需要：挂起不重要的进程保证系统正常运行</li>
<li>操作系统得出需要：操作系统记账</li>
</ul>
<p><strong>三态、五态、七态模型：注意图中状态名称和操作名称，要会默写</strong></p>
<p>PCB作用：</p>
<ul>
<li>作为独立运行基本单位的标志</li>
<li>实现间断性运行的方式</li>
<li>提供进程管理需要的信息</li>
<li>实现与其它进程通信</li>
</ul>
<p>PCB中的信息：</p>
<ul>
<li>进程控制符（编号）</li>
<li>处理机状态（寄存器信息，计数器）</li>
<li>进程调度信息（进程状态和优先级）</li>
<li>进程控制信息（资源清单）</li>
</ul>
<p>PCB组织方式：链式、索引式</p>
<p>操作系统管理数据结构分类：内存表、设备表、文件表、进程表</p>
<h4 id="2-3-进程控制"><a href="#2-3-进程控制" class="headerlink" title="2.3 进程控制"></a>2.3 进程控制</h4><p><strong>内核的功能</strong>：</p>
<ul>
<li>支撑功能：中断处理、时钟管理、原语操作</li>
<li>资源管理功能：进程管理、存储器管理、设备管理</li>
</ul>
<p><strong>引起进程创建的事件</strong>：<br>用户登录、作业调度（从外存进内存）、提供服务（用户请求打印）、应用请求</p>
<p><strong>引起进程终止的事件</strong>：<br>正常结束、异常结束（越界、非法访问、非法指令、特权指令、运行超时、超时等待、算数运算、IO故障）、外界干预（ctrl+c）</p>
<p><strong>引起阻塞和唤醒的事件</strong>：<br>向系统请求共享资源失败、等待操作完成（IO）、新数据未到达（wait）、等待新任务到达（网络进程）</p>
<p><strong>进程创建过程</strong>：</p>
<ul>
<li>申请空白PCB</li>
<li>为新进程分配所需资源（物理+逻辑）</li>
<li>初始化PCB</li>
<li>加入就绪队列</li>
</ul>
<p><strong>进程终止过程</strong>：</p>
<ul>
<li>根据标识符找到PCB读出进程状态</li>
<li>若正在运行立即终止，指示系统重新调度</li>
<li>终止子孙进程</li>
<li>将进程资源归还父进程或系统</li>
<li>移出PCB等待信息被收集</li>
</ul>
<p><strong>进程阻塞过程</strong>：进程使用阻塞原语block自己<br>停止运行并进入阻塞队列，调度程序重新调度</p>
<p><strong>进程唤醒过程</strong>：由有关进程使用wakeup原语唤醒<br>将进程从阻塞队列移出，将PCB改为就绪，加入就绪队列。</p>
<p><strong>进程挂起过程</strong>：用户或父进程提出，OS利用suspend挂起指定进程<br>检查进程状态，改为对应的静止状态，复制PCB到指定内存区域以备查看。指引重新调度</p>
<p><strong>进程激活过程</strong>：OS利用active激活制定进程<br>将进程从外村调入内存，检查状态，改为对应就绪/阻塞状态。如果有抢占机制比较是否抢占。</p>
<p><em>fork、exec系、wait、exit</em></p>
<h4 id="2-4-进程同步"><a href="#2-4-进程同步" class="headerlink" title="2.4 进程同步"></a>2.4 进程同步</h4><p><strong>进程制约关系</strong>：间接相互制约（资源互斥共享）、直接相互制约（管道<strong>同步</strong>）<br><strong>同步</strong>：系统中多个进程发生的事件存在时序关系，需要相互<strong>合作</strong>完成同一任务<br><strong>互斥</strong>：各进程要求共享资源，而有些资源需要互斥使用，各进程间<strong>竞争</strong>使用<br><strong>临界资源</strong>：系统中一次只允许一个进程使用的资源<br><strong>临界区</strong>：进程中访问临界资源的代码段</p>
<p><strong>同步机制遵循的规则：（临界区问题）</strong><br><strong>空闲让进、忙则等待、有限等待、让权等待</strong></p>
<p><strong>硬件同步机制</strong>：</p>
<ul>
<li>关中断：禁止中断发生，不适用于多CPU</li>
<li>Test-and-Set指令：疯狂测试lock，如果开门了就锁门后访问</li>
<li>Swap指令：疯狂交换key和lock，如果key变true了访问 </li>
</ul>
<p><strong>信号量机制</strong>：</p>
<ul>
<li>整型信号量：P(s)-V(s)/wait(s)-signal(s)<br> 只要信号量小于等于0就不断进行测试（忙等）</li>
<li>记录型信号量：wait(s)-signal(s)解决了忙等（让权等待）<br> S-&gt;value≥表示系统中可用资源数<br> S-&gt;value小于零表示已阻塞进程数<br> S-&gt;value初始值为1表示互斥信号量<br> S-&gt;list记录阻塞进程信息</li>
<li>AND型信号量：Swait(S1,S2…Sn)、Ssignal<br> 一次性分配全部资源给进程（要么全部分配，要么一个都不分配），效率较低<br> 每次一种资源只能分配一个</li>
<li>信号量级：Swait(S1,t1,d1…Sn,tn,dn)<br> 一次性请求t1个S1，如果成功消耗d1个S1<br> Swait(S,d,d)：请求d个S，如果少于d则不分配<br> Swait(S,1,1)：退化为记录型信号量(S&gt;1)或互斥信号量(S=1)<br> Swait(S,1,0)：S=1时允许多个进程进入，反之不允许进入。相当于可控开关</li>
</ul>
<p><strong>信号量的应用</strong>：互斥和同步P57</p>
<p><strong>管程</strong>：定义了一个数据结构和能为并发进程所执行的一组操作，这组操作能同步进程和改变管程中的数据。将共享资源的数据结构和操作过程封装在对象内部，隐藏实现细节。</p>
<h4 id="2-5-经典进程同步问题"><a href="#2-5-经典进程同步问题" class="headerlink" title="2.5 经典进程同步问题"></a>2.5 经典进程同步问题</h4><ul>
<li><strong>生产者-消费者问题P60</strong></li>
<li><strong>哲学家进餐问题P63</strong></li>
<li><strong>读者-写者问题P65</strong></li>
</ul>
<h4 id="2-6-进程通信"><a href="#2-6-进程通信" class="headerlink" title="2.6 进程通信"></a>2.6 进程通信</h4><p>进程通信就是进程之间的信息交换，用于同步和互斥。</p>
<p><strong>进程通信的类型</strong>：</p>
<ul>
<li><strong>共享存储器系统</strong>：共享数据结构或存储区<ul>
<li>基于共享数据的通信方式（数据结构）</li>
<li>基于共享存储区的通信方式（内存）</li>
</ul>
</li>
<li><strong>管道通信系统</strong>：写进程 —&gt; 管道文件 —&gt; 读进程</li>
<li><strong>消息传递系统</strong>：以格式化消息为单位<ul>
<li>直接通信方式（原语操作）</li>
<li>间接通信方式（通过共享中间实体（邮箱））</li>
</ul>
</li>
<li><strong>客户-服务器系统</strong>：<ul>
<li>套接字：分基于文件型和基于网络型</li>
<li>远程方法调用和远程文件调用</li>
</ul>
</li>
</ul>
<h4 id="2-7-线程的基本概念"><a href="#2-7-线程的基本概念" class="headerlink" title="2.7 线程的基本概念"></a>2.7 线程的基本概念</h4><p><strong>线程的引入</strong>：<br>为了减少程序在并发执行时所付出的时空开销，使OS具有更好的并发性。</p>
<p><strong>线程和进程的比较</strong>：</p>
<ul>
<li>调度的基本单位：进程独立调度分派；进程调度分派，独立运行</li>
<li>并发性：都可以并发执行</li>
<li>拥有资源：进程是拥有资源的基本单位；线程仅拥有必不可少的独立运行所需的资源</li>
<li>独立性：线程间共享地址空间和资源</li>
<li>系统开销：线程没什么资源，开销小</li>
<li>支持多处理机系统：单进程多线程更加满足多处理机系统</li>
</ul>
<p><strong>2.8 线程的实现</strong></p>
<ul>
<li><strong>内核支持线程</strong>：内核创建，能够并发，用户切换线程需要陷入</li>
<li><strong>用户级线程</strong>：用户创建，切换不需要陷入，但阻塞后无法调度</li>
<li>组合模式：两者结合相互利用</li>
</ul>
<h3 id="第三章-处理机调度与死锁"><a href="#第三章-处理机调度与死锁" class="headerlink" title="第三章 处理机调度与死锁"></a><center>第三章 处理机调度与死锁</center></h3><h4 id="3-1-处理机调度的层次和调度算法的目标"><a href="#3-1-处理机调度的层次和调度算法的目标" class="headerlink" title="3.1 处理机调度的层次和调度算法的目标"></a>3.1 处理机调度的层次和调度算法的目标</h4><p><strong>处理机调度的层次</strong>：</p>
<ul>
<li>高级调度（作业调度）</li>
<li>中级调度（内存调度）</li>
<li>低级调度（进程调度）</li>
</ul>
<p><strong>调度算法的目标</strong>：</p>
<ul>
<li>共同目标：资源利用率、公平性、平衡性、策略强制执行</li>
<li>批处理系统目标：平均周转时间短、系统吞吐量高、处理机利用率高</li>
<li>分时系统目标：响应时间快、均衡性</li>
<li>实时系统目标：截止时间的保证、可预测性</li>
</ul>
<p><strong>周转时间</strong>：作业交给系统到完成的时间<br>平均周转时间 $ \overline{T} = \frac{1}{n}\sum_{i=1}^{n}T_i $<br>带权平均周转时间 $ W = \frac{1}{n} \sum_{i=1}^{n}\frac{T_i}{T_s} \geq 1 $<br>$ \text{CPU利用率} = \frac{\text{CPU有效工作时间}}{\text{CPU有效工作时间} + \text{CPU空闲等待时间}} $</p>
<h4 id="3-2-作业和作业调度"><a href="#3-2-作业和作业调度" class="headerlink" title="3.2 作业和作业调度"></a>3.2 作业和作业调度</h4><p>进程：程序段+数据+PCB<br>作业：程序+数据+作业说明书<br>作业步：完成作业的一个个步骤<br>作业控制块JCB</p>
<p>作业运行的三个阶段和三种状态：</p>
<ul>
<li>收容阶段（后备状态）：建立JCB进入后备队列</li>
<li>运行阶段（运行状态）：分配资源、运行</li>
<li>完成阶段（完成状态）：完成</li>
</ul>
<p>作业调度的主要任务：<br>根据JCB中的信息检查资源满足情况，再根据调度算法决定将作业放入内存，创建进程分配资源。接纳多少作业、接纳哪些作业<br><strong>先来先服务算法（FCFS）</strong>：等待时间</p>
<p><strong>短作业优先算法（SJF）</strong>：作业运行时间<br>缺点：预制时间、可能饥饿、无人机交互、不考虑紧迫程度</p>
<p><strong>高优先权优先算法（HPF(PSA)）</strong>：作业紧迫程度</p>
<p><strong>高响应比优先算法（HRRN(PSA)）</strong>：SJF和FCFS的折衷<br>$ \text{优先权}=\frac{\text{等待时间} + \text{要求服务时间}}{\text{要求服务时间}}= \frac{\text{响应时间}}{\text{要求服务时间}} $</p>
<h4 id="3-3-进程调度"><a href="#3-3-进程调度" class="headerlink" title="3.3 进程调度"></a>3.3 进程调度</h4><p><em>进程调度算法继承作业调度全部算法</em><br>任务：保存处理器信息，按算法选取下一个进程，将处理器分配给进程<br>机制：排队器（事先排队）、分派器（选取进程）、上下文切换器</p>
<p>进程调度方式：</p>
<ul>
<li>非抢占式：进程执行完毕或无法执行、进程请求IO、通信或同步被block</li>
<li>抢占式：高优先权优先、高响应比优先、时间片原则</li>
</ul>
<p><strong>最短剩余时间优先算法（SRTF）</strong>：抢占式，进程专用<br>新进程到达时，如果时间少于当前CPU进程剩余时间则产生中断</p>
<p><strong>轮转调度算法（RR）</strong>：<br>根据FCFS排成就绪队列，每隔一个时间片产生中断，将CPU分配给队首进程。进程切换当且仅当时间片完或运行结束。较为可取的时间片大小是略大于典型交互所需要的时间，使交互程序能在一个时间片内完成。</p>
<p><strong>多级反馈队列调度算法（MFQ）</strong>：<br>设置多个就绪队列，每个队列使用不同优先级。能够在不知道进程时长的情况下满足各类型用户的需要（终端、短批处理、长批处理）</p>
<ul>
<li>第1至第n-1级队列：FCFS</li>
<li>第n级队列：RR</li>
<li>队列间：HPF</li>
</ul>
<h4 id="3-4-实时调度"><a href="#3-4-实时调度" class="headerlink" title="3.4 实时调度"></a>3.4 实时调度</h4><p>按任务性质分类：硬实时调度、软实时调度<br>按调度方式分类：抢占式、非抢占式（硬实时调度提前预知）<br><strong>最早截止时间优先EDF</strong>：截止越早越优先<br><strong>最低松弛度优先LLF</strong>：截止时间-剩余时间越小越优先</p>
<p><strong>优先级倒置</strong>：<br>一个低优先级进程持有一个高优先级进程所需要的资源，使高优先级进程等待地优先级进程运行。<br>解决办法：临界区期间低优先级进程继承高优先级进程的优先级。</p>
<h4 id="3-5-死锁概述"><a href="#3-5-死锁概述" class="headerlink" title="3.5 死锁概述"></a>3.5 死锁概述</h4><p><strong>死锁</strong>：<br>计算机系统中多道程序并发执行时，两个或两个以上的进程由于竞争系统资源而造成的一种互相等待的现象。<br>若无外力作用，这组进程将永远不能继续执行。</p>
<p><strong>资源</strong>：</p>
<ul>
<li>可重用性资源（数目相对固定）和消耗性资源（生产创建，消费消耗）</li>
<li>可抢占性资源（处理机）和不可抢占性资源（打印机）</li>
</ul>
<p>死锁的产生：</p>
<ul>
<li>竞争不可抢占性资源</li>
<li>竞争可消耗性资源</li>
<li>进程间推进顺序不当</li>
</ul>
<p><strong>死锁定义</strong>：如果一组进程中的每一个进程都在等待仅由该组进程中的其他进程才能引发的事件，那么该组进程就是死锁的。</p>
<p><strong>死锁产生的四个必要条件</strong>：</p>
<ul>
<li><strong>互斥条件</strong>：资源独占，进程对分配到的资源进行排他性使用</li>
<li><strong>请求和保持条件</strong>：进程已经保持至少一个资源，又提出新请求，如未能满足，不释放已获得资源</li>
<li><strong>不可抢占条件</strong>：资源在未被使用完前不能被抢占，只能由进程使用完后自愿释放</li>
<li><strong>循环等待条件</strong>：存在进程-资源循环链，环路中的进程形成等待链</li>
</ul>
<p><strong>死锁处理方法</strong>：</p>
<ul>
<li><strong>预防死锁</strong>：破坏死锁产生的必要条件</li>
<li><strong>避免死锁</strong>：防止系统进入不安全状态（银行家算法）</li>
<li><strong>检测死锁</strong>：通过检测机构及时发现死锁，再采取措施（资源分配图）</li>
<li><strong>解除死锁</strong>：当死锁发生，撤销一些进程，回收资源再分配</li>
</ul>
<h4 id="3-6-预防死锁"><a href="#3-6-预防死锁" class="headerlink" title="3.6 预防死锁"></a>3.6 预防死锁</h4><p><strong>破坏请求和保持</strong>：一次性申请全部资源（浪费+饥饿）；申请初期资源，运行后释放<br><strong>破坏不可抢占</strong>：新资源得不到满足时主动释放已有资源<br><strong>破坏循环等待</strong>：对资源排序，申请低序号资源必须先释放所有高序号资源</p>
<h4 id="3-7-避免死锁"><a href="#3-7-避免死锁" class="headerlink" title="3.7 避免死锁"></a>3.7 避免死锁</h4><p><strong>避免死锁与预防死锁的区别</strong>：<br>预防死锁对进程的资源申请命令施加限制（规定死的）<br>避免死锁在进程请求分配资源时进行<strong>动态检查</strong>，并根据检查结果决定分配</p>
<p><strong>安全状态与安全序列</strong>：<br>系统能按某种进程推进顺序为每个进程分配所需资源，直至满足每个进程对资源的最大需求，使每个进程都能顺利完成。<br>相应序列为安全序列。<br>若不存在安全序列，则称为不安全状态。</p>
<p><strong>银行家算法中的数据结构</strong>：<br>Max、Allocation、Need、Available</p>
<p><strong>银行家算法过程</strong>：两个判断三个调整</p>
<ul>
<li>检查是否超出需求总量，超出报错</li>
<li>检查是否资源不足，不足等待</li>
<li>试探进行分配</li>
<li>执行安全性检查算法。</li>
<li>如不安全，试探分配作废，进程等待</li>
</ul>
<p><strong>安全性算法</strong>：<br>Work、Need、Allocation、Work + Allocation、Finish<br>寻找安全序列。</p>
<p>银行家算法的不足：对资源分配相对保守，计算多，需要预知未来进程变化和资源请求</p>
<h4 id="3-8-检测死锁与解除死锁"><a href="#3-8-检测死锁与解除死锁" class="headerlink" title="3.8 检测死锁与解除死锁"></a>3.8 检测死锁与解除死锁</h4><p><strong><em>资源分配图</em></strong></p>
<p><strong>死锁定理</strong>：<br>死锁产生充要条件：资源分配图不可完全简化。<br>不存在环路一定没死锁，存在环路可能不存在死锁。<br>在一系列简化后，能消去图中所有边，使所有进程节点孤立，则不会产生死锁。</p>
<p><strong>死锁解除的方法</strong>：<br>抢占资源：从一个或多个进程中抢占足够资源分配给死锁进程<br>终止（撤销）进程：直至打破循环环路，解脱死锁状态</p>
<p>终止进程方法：终止所有死锁进程、逐个终止进程</p>
<h3 id="第九章-操作系统接口"><a href="#第九章-操作系统接口" class="headerlink" title="第九章 操作系统接口"></a><center>第九章 操作系统接口</center></h3><h4 id="9-1-接口"><a href="#9-1-接口" class="headerlink" title="9.1 接口"></a>9.1 接口</h4><p>OS向用户提供的<strong>两类接口</strong>：<strong>用户接口、程序接口</strong></p>
<p>用户接口分类：联机用户接口和脱机用户接口</p>
<p>脱机用户接口：批处理用户接口（作业控制语言JCL、作业控制块JCB）<br>联机用户接口：字符界面、图形化界面；命令语言（Shell）</p>
<h4 id="9-2-系统调用"><a href="#9-2-系统调用" class="headerlink" title="9.2 系统调用"></a>9.2 系统调用</h4><p><strong>系统调用</strong>：用户程序取得系统服务的唯一途径<br>系统调用与一般调用的区别：<br>运行在内核态、通过软中断进入、返回问题、嵌套调用</p>
<h4 id="9-3-Linux提供的接口"><a href="#9-3-Linux提供的接口" class="headerlink" title="9.3 Linux提供的接口"></a>9.3 Linux提供的接口</h4><p><strong>Linux实验有关内容</strong>：<br>常用shell命令：<br>ls、ps、who、cd、mkdir、cat、kill、wc、link、chmod、chown、data<br>美元#代表执行所带参数个数、美元1代表第一个参数的值</p>
<p>系统调用命令：<br>fork、wait、execlp、exit、sleep、signal、kill、getpid、getppid、pipe、pause的应用</p>
<p>进程间的通信：软中断、管道、文件</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/study-note/" rel="tag"># study note</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2019/12/02/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%A4%8D%E4%B9%A0%E5%A4%A7%E7%BA%B2/" rel="prev" title="计算机网络复习大纲">
      <i class="fa fa-chevron-left"></i> 计算机网络复习大纲
    </a></div>
      <div class="post-nav-item">
    <a href="/2019/12/05/Leetcode699-%E7%BA%BF%E6%AE%B5%E6%A0%91/" rel="next" title="Leetcode699 离散化+线段树">
      Leetcode699 离散化+线段树 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>
      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#第一章-操作系统引论"><span class="nav-text">第一章 操作系统引论</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-操作系统的目标和作用"><span class="nav-text">1.1 操作系统的目标和作用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-操作系统的发展过程"><span class="nav-text">1.2 操作系统的发展过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-3-操作系统的基本特征（四大特征）"><span class="nav-text">1.3 操作系统的基本特征（四大特征）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-操作系统的结构设计"><span class="nav-text">1.5 操作系统的结构设计</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第二章-进程的描述和控制"><span class="nav-text">第二章 进程的描述和控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-前趋图和程序执行"><span class="nav-text">2.1 前趋图和程序执行</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-进程的描述"><span class="nav-text">2.2 进程的描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-进程控制"><span class="nav-text">2.3 进程控制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-4-进程同步"><span class="nav-text">2.4 进程同步</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-5-经典进程同步问题"><span class="nav-text">2.5 经典进程同步问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-6-进程通信"><span class="nav-text">2.6 进程通信</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-7-线程的基本概念"><span class="nav-text">2.7 线程的基本概念</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第三章-处理机调度与死锁"><span class="nav-text">第三章 处理机调度与死锁</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-处理机调度的层次和调度算法的目标"><span class="nav-text">3.1 处理机调度的层次和调度算法的目标</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-作业和作业调度"><span class="nav-text">3.2 作业和作业调度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-3-进程调度"><span class="nav-text">3.3 进程调度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-4-实时调度"><span class="nav-text">3.4 实时调度</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-5-死锁概述"><span class="nav-text">3.5 死锁概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-6-预防死锁"><span class="nav-text">3.6 预防死锁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-7-避免死锁"><span class="nav-text">3.7 避免死锁</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-8-检测死锁与解除死锁"><span class="nav-text">3.8 检测死锁与解除死锁</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#第九章-操作系统接口"><span class="nav-text">第九章 操作系统接口</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#9-1-接口"><span class="nav-text">9.1 接口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-2-系统调用"><span class="nav-text">9.2 系统调用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#9-3-Linux提供的接口"><span class="nav-text">9.3 Linux提供的接口</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Lemon Qin"
      src="/images/Lemon.jpg">
  <p class="site-author-name" itemprop="name">Lemon Qin</p>
  <div class="site-description" itemprop="description">愿我在未来的几年内，不要因为走得太远，忘记自己为什么出发</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/lemon-412" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;lemon-412" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:lemon412@foxmail.com" title="E-Mail → mailto:lemon412@foxmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>



      </div>
<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=298 height=52 src="//music.163.com/outchain/player?type=2&id=473928488&auto=1&height=32"></iframe>
    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Lemon Qin</span>
</div>

        








        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  
















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
